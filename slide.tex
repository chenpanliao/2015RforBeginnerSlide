%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode

\documentclass[12pt, aspectratio=43]{beamer}
\usepackage{amsmath, fancyvrb, textcomp}
\usepackage{xcolor}
\definecolor{verb}{rgb}{0.0,0.3,0.0}
\definecolor{white}{rgb}{1,1,1}

% draft
\usepackage[firstpage]{draftwatermark}
\SetWatermarkFontSize{4cm}
\SetWatermarkColor[rgb]{1,0.9,0.9}
\SetWatermarkAngle{30}
\setbeamercolor{background canvas}{bg=}%transparent canvas

%% Beamer 版面配置
\mode<presentation>

\usetheme{Pittsburgh}
%\usetheme[height = 1.4cm]{Rochester}
%\usetheme{Singapore}
\usecolortheme{orchid}
%\usecolortheme{rose}
%\useoutertheme[subsection=false]{miniframes}


% page number shown on top-right corner
    \setbeamertemplate{headline}{%
        \vskip3pt\hspace*{\fill}\insertframenumber\hspace*{3pt}\vspace*{-10pt}%
    }
    \setbeamercolor{headline}{fg=black!50, bg=black!50}
    \setbeamerfont{headline}{size=\scriptsize}


%    \setbeamercolor{postit}{bg=blue!10}
%    \setbeamertemplate{headline}
%    {%
%      \begin{beamercolorbox}[wd=1\paperwidth]{postit}
%        \vskip1pt\insertnavigation{1\paperwidth}\vskip1pt
%      \end{beamercolorbox}\vspace*{-15pt}%
%    }
%

% frametitle
    \setbeamertemplate{frametitle}{\vspace*{8pt}\hspace*{\fill}\insertframetitle\par}
%    \setbeamercolor{frametitle}{fg=black}

\setbeamersize{text margin left=0.5cm, text margin right=0.5cm}

\let\oldfootnote\footnote
\renewcommand\footnote[1]{\hspace{-0.3em}\oldfootnote{\ignorespaces#1}\hspace{0.3em}}
\setbeamerfont{footnote mark}{size=\tiny}
\setbeamerfont{footnote}{size=\scriptsize}
%\setbeamertemplate{footnote}{\textsuperscript{\insertfootnotemark}\insertfootnotetext}

%\setbeamerfont{page number in head/foot}{size = \scriptsize}
%\setbeamertemplate{footline}[frame number]{}

\usefonttheme{structurebold}


\beamertemplatenavigationsymbolsempty % 去除 Beamer 導覽工具列

%\DefineVerbatimEnvironment{MyVerbatim}{Verbatim}{fontsize=\tiny}

%% 西文字配置
\linespread{1.2}
\usepackage{arevmath}
\usepackage[no-math]{fontspec}
\setmainfont[Mapping=tex-text, LetterSpace=0, BoldFont={Lato Bold}]{Lato}
\setsansfont[Mapping=tex-text, LetterSpace=0, BoldFont={Lato Bold}]{Lato}
\setmonofont[Color=verb, Scale=0.95, LetterSpace=-2, BoldFeatures={Color=white}, BoldFont={Consolas}]{Consolas}
%\setmonofont[Color=verb, Scale=0.9, LetterSpace=-0]{PT Mono}
\usefonttheme{professionalfonts}

%% 中文字配置
\usepackage[
  CJKmath=true, indentfirst=false, PunctStyle={quanjiao}, CheckSingle=false
]{xeCJK}

%\setCJKmonofont[Scale=1, BoldFont={Osaka-Mono}, Color=verb]{Osaka-Mono}
\setCJKmainfont[Scale=1, BoldFont={Heiti TC Medium}]{Heiti TC Medium}
\setCJKmonofont[Scale=0.95, BoldFont={DFYuanMedium-B5}, Color=verb]{DFYuanMedium-B5}

%\setCJKmainfont[Scale=1, BoldFont={LiHei Pro}]{LiHei Pro}
%\setCJKmonofont[Scale=1, BoldFont={LiHei Pro}, Color=verb]{LiHei Pro}
%\setCJKfallbackfamilyfont{\CJKsfdefault}[AutoFakeSlant]{[BoldFont=SimHei]{SimSun}}

%\setCJKmainfont[Scale=1, BoldFont={Lantinghei TC Heavy}]{Lantinghei TC}
%\setCJKmonofont[Scale=1, BoldFont={Lantinghei TC Heavy}, Color=verb]{Lantinghei TC}


\title{初學R語言的60分鐘}
\author{廖鎮磐 \texttt{<andrew.43@gmail.com>}}
\institute{東海大學生命科學系}
\date{2015年台灣生態研究網年會 -- 2015年3月14日於蓮華池研究中心}
\hypersetup{
    bookmarks=true,         % show bookmarks bar?
    unicode=true,           % non-Latin characters in Acrobat’s bookmarks
    pdftoolbar=true,        % show Acrobat’s toolbar?
    pdfmenubar=true,        % show Acrobat’s menu?
    pdffitwindow=false,     % window fit to page when opened
    pdfstartview={FitH},
    pdfpagelayout={OneColumn},
%    pdfpagemode={FullScreen},
    pdfpagemode={UseOutlines},
    pdfdisplaydoctitle=true,
    pdfinfo={License={Attribution-ShareAlike 4.0 International}},
    pdftitle={初學R語言的60分鐘},    % title
    pdfauthor={廖鎮磐 <andrew.43@gmail.com>},     % author
    pdflang={zh-TW},
    xetex
}

\setbeamertemplate{title page}{
  \vskip0pt plus 1filll
    \huge{\usebeamercolor[fg]{title}初學\hspace{0.2em}\includegraphics[width=3cm]{Rlogo-novo.png}\hspace{0.2em}語言的60分鐘}\\[8pt]
    \normalsize{廖鎮磐 \texttt{<andrew.43@gmail.com>}\\東海大學生命科學系}\\[10pt]
    \normalsize{2015年台灣生態研究網年會\\ 2015年3月14日於蓮華池研究中心}
    \vskip0pt plus 0.5filll
    {\scriptsize
         © 2015 廖鎮磐（Chen-Pan Liao）。\\[8pt]
        \vskip-1pt\includegraphics[height=5ex]{by-sa.pdf} \newline
	 本文件採用姓名標示-相同方式分享 4.0 國際授權（CC BY-SA 4.0）。\footnote{詳情請見 \url{http://creativecommons.org/licenses/by-sa/4.0/deed.zh_TW}。}\\[-6pt]
	 歡迎下載本投影片及資料檔案。\footnote{\url{https://www.dropbox.com/sh/7p9cluglptyk25a/AAAmPWrSMVf_tC9-cL4JSscCa?dl=0}} 
	 \vspace{10pt}
    }
}






\AtBeginSection[] {
  \begin{frame}
    \frametitle{大綱}
    \tableofcontents[currentsection]
  \end{frame}
  \addtocounter{framenumber}{-1}
} 

\begin{document}

\begin{frame}
\titlepage
\end{frame}

\begin{frame}
\frametitle{大綱}
\tableofcontents
\end{frame}

\section{R簡介與操作環境}\subsection{}

\begin{frame}{今天主題$\cdots\cdots$}

\begin{block}{預設聽眾}
\begin{itemize}
\item 修過至少3學分的統計學。
\item 從沒使用過R或其它統計軟體。
\item 從沒學過任何程式語言。
\end{itemize}
\end{block}

\begin{block}{目標}
\begin{itemize}
\item 不怕害使用R這類以文字指令進行的工作方式。
\item 如何自己救自己。
\item 如何請別人救自己。
\item 實作一些常見的統計分析與繪圖。
\end{itemize}
\end{block}

\end{frame}




\begin{frame}{R的特色}
\framesubtitle{為什麼我選擇R？}
\begin{itemize}
\item 自由、免費、跨平台。
\item 是一種「程式語言」，像Python、Perl、JAVA等。
\item 是一種「統計工具」，像SAS、SPSS等。
\item 強大的視覺化工具，畫專業的圖，但需要經驗。
\item 套件豐富，不同自己重新寫程式。
\end{itemize}
\end{frame}

\begin{frame}[fragile]{安裝R語言}
\begin{enumerate}
\item 到達 \url{http://www.r-project.org/}
\item 點選Download, Packages (CRAN) \\
\item 選擇作業平台
\end{enumerate}
	\begin{center}\includegraphics[width=0.6\textwidth]{downloadR.png}\end{center}
\end{frame}

\begin{frame}[fragile]{選用適當的R程式編輯器}
\begin{itemize}
\item 建議以純文字編輯器撰寫R程式碼，並儲存成「\verb+.R+」檔。
\item 「語法多色支援」、「語法提示」、「即時執行」等功能，增加撰寫效率。
\item 支援R語言的編輯器很多，有興趣請自行試用。
\begin{description}[longest item]
	\item [RStudio] 強大、整合性高、專為R程式員設計。\footnote{\url{http://www.rstudio.com/}}
	\item [Notepad++] 老字號的純文字編輯器，有和R相配合的外掛。\footnote{\url{http://notepad-plus-plus.org/}}
	\item [Atom] 與GitHub配合度高。\footnote{\url{https://atom.io/}}
\end{description}
\end{itemize}
\end{frame}


\begin{frame}[fragile]{初次見面：R是計算機}
\begin{columns}
\column{0.4\textwidth}
\begin{verbatim}
> 2.4 + 42
[1] 44.4
> 4 ^ 2
[1] 16
> sqrt(100)
[1] 10
> 100 ^ 0.5
[1] 10
\end{verbatim}

\column{0.4\textwidth}
\begin{verbatim}
> a <- 1
> a
[1] 1
> 1 -> b
> b
[1] 1
> a + b
[1] 2
\end{verbatim}

\end{columns}
\end{frame}


%\begin{frame}[fragile]{Q\&A的時間到囉}
%\begin{itemize}
%\item[Q] 如何找能做某件事的套件？
%\item[A] 請Google大神幫你找最快。真的。
%\end{itemize}
%\end{frame}

\section{R的函數}\subsection{}

\begin{frame}[fragile]{什麼是程式語言的函數}

\begin{block}{使用某函數的語法通則}
\verb+函數名(第一引數名 = 某值, 第二引數名 = 某值, ...)+ 
\end{block}

\begin{itemize}
\item 程式語言的函數（function）提供一個特定的功能，可以有引數（輸入值）和回傳值（輸出值）。
\item 操作R的過程，幾乎就是使用各種function的過程。
\item 若需要進行某一套程式多次，可以將之改寫成函數以利重覆使用。
\item 試試看 \verb+seq(from = 0, to = 9)+ 的回傳值是什麼？
\item 用中文說明上面的程式：「在 \verb+seq()+ 這個function中，第一個引數名為 \verb+from+，表示起始值，其值為0；第二個引數名為 \verb+to+，表示終點值，其值是9。」
\end{itemize}
\end{frame}



\begin{frame}[fragile]{函數的使用手冊}
\begin{itemize}
\item 觀看某個函數的使用手冊：\verb+?函數名+ 或 \verb+help(函數名)+。
\item 請看看 \verb+?seq+。
\item 使用手冊中都有以下資訊：
\begin{description}[longest item]
	\item [Description] 函數的功能。
	\item [Usage] 基本語法，包括了引數的順序和預設值。
	\item [Arguments] 引數的細節。
	\item [Details] 函數的詳細內容。
	\item [Value] 回傳值的內容。
	\item [See Also] 其它相關的函數。
	\item [Examples] 使用範例。
\end{description}
\end{itemize}
\end{frame}



\begin{frame}[fragile]{引數的預設值}

\begin{block}{\texttt{seq()} 的基本語法}
\verb+seq(from = 1, to = 1, ...)+ \\
\end{block}
\begin{itemize}
\item 在使用手冊中可以看出：
  \\ 第一個引數 \verb+from+ 的預設值是 1。
  \\ 第一個引數 \verb+to+ 的預設值是 1。
\item 使用者未定義時採用的值，就是預設值。
\item 方便快速使用。
\item 例如：\\
  \verb+seq(from = 10)+ 和 \\
  \verb+seq(from = 10, to = 1)+ 是相等的。
\end{itemize}
\end{frame}


\begin{frame}[fragile]{引數的順序}

\begin{block}{\texttt{seq()}的基本語法}
\verb+seq(from = 1, to = 1, ...)+ \\
\end{block}

\begin{itemize}
\item 當明確指定引數名時，引數的順序無所謂。例如：\\ \verb+seq(from = 0, to = 9)+ 和 \\ \verb+seq(to = 9, from = 0)+ 同義。
\item 當引數的順序與該函數要求的順序相同時，可以省略引數名。例如：\\ \verb+seq(from = 0, to = 9)+ 可以省略為 \\ \verb+seq(0, 9)+ 的形式。
\end{itemize}
\end{frame}


\begin{frame}[fragile]{引數的綜合練習}

\begin{block}{\texttt{seq()}的基本語法}
\verb+seq(from = 1, to = 1, ...)+ \\
\end{block}

試回答下列程式的回傳值為何？
\begin{itemize}
\item \verb+seq(from = 3, to = 1)+
\item \verb+seq(3, to = 1)+
\item \verb+seq(from = 3, 1)+
\item \verb+seq(3, 1)+
\item \verb+seq(to = 1, from = 3)+
\end{itemize}
\end{frame}



\begin{frame}[fragile]{Q\&A的時間又到囉}
\begin{itemize}
\item[Q] 成千上萬的函數哪學得完？
\item[A] 不用學完！沒人學得完！學常用的就好。
\end{itemize}
\begin{itemize}
\item[Q] 函數的使用手冊看不懂耶。
\item[A] 我也常看不懂。儘量看，多嘗試，特別是 Example 部份。
\end{itemize}
\begin{itemize}
\item[Q] 如何找能做某件事的函數？
\item[A] 請Google大神幫你找最快。真的。
\end{itemize}
\end{frame}


\section{資料的讀取與整理}\subsection{}


\begin{frame}[fragile]{檔案下載}
\begin{enumerate}
\item 至 \url{http://goo.gl/YRCOaN} 下載以下三個檔案。
\begin{description}
\item [\texttt{slide.pdf}]投影片
\item [\texttt{exam.xlsx}]例範資料
\item [\texttt{text.xlsx}]練習資料
\end{description}

\item 在C disk 下創建一個 \verb+LearnR2015+ 資料夾，並將三個檔案置入該資料夾中。
\end{enumerate}
%\begin{center}
%\Huge\url{http://goo.gl/YRCOaN}\\
%\includegraphics[width=2.5in]{url-dropbox.pdf}
%\end{center}
\end{frame}


\begin{frame}[fragile]{讀取CSV資料檔案}
\begin{enumerate}
\item 開啟 \verb+exam.xlsx+，注意第一列必需有一列「變數名」。
\item 另存新檔 $\rightarrow$ 檔名為「exam」，類型為「CSV」，儲存在相同資料夾中。
\item \verb+getwd()+ 顯示目前R所在的路徑。
\item \verb+setwd("C:/LearnR2015")+ 到達該資料夾。
\item \verb+dt <- read.csv("exam.csv")+ 或是 \\
      \verb+dt <- read.csv("C:/LearnR2015/exam.csv")+ 以讀取該檔成為一個資料框（data frame），並取名為 \verb+dt+。\\
\item \verb+dt+ 的結果是什麼？
\end{enumerate}
\end{frame}


\begin{frame}[fragile]{提取特定變數（欄）}
\begin{verbatim}
> dt
  ID Gender Group Literature Science
1 23      m     A         36      63
...
\end{verbatim}

如何取得Science變數？直接輸入 \verb+Science+ 是不行的，因為它是在 \verb+dt+ 裡的變數。
\begin{itemize}
\item \verb+dt$Science+ 意思是「dt裡的Science變數」
\item \verb+dt[ , 5]+ 意思是「dt裡的第5欄變數」
\item \verb+attach(dt)+ 可使dt的所有變數傳至表層。
\end{itemize}
\end{frame}


\begin{frame}[fragile]{提取特定重覆數（列）}
\begin{itemize}
\item \verb+dt[3 , ]+ 取得「dt裡的第3列變數」
\item \verb+subset(dt, Gender == "m")+ \\ 取得 Gender 是 m 的資料。
\item \verb+subset(dt, Science >= 60)+ \\ 取得 Science 大於等於 60 的資料。
\item \verb+subset(dt, Gender == "m" | Science >= 60)+ \\ 取得 Gender 是 m \alert{或} Science 大於等於 60 的資料。
\item \verb+subset(dt, Gender == "m" & Science >= 60)+ \\ 取得 Gender 是 m \alert{且} Science 大於等於 60 的資料。
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Q\&A的時間又到囉}
\begin{itemize}
\item[Q] 可否直接讀取 xlsx 檔？\\
\item[A] 可以！請日後自行研究 \verb+xlsx+ 這個套件。
\end{itemize}
\begin{itemize}
\item[Q] 可不可以資料排序？\\
\item[A] 可以！請日後自行研究 \verb+order()+ 和 \verb+sort()+。
\end{itemize}
\end{frame}


\section{統計分析與繪圖}\subsection{}

\begin{frame}[fragile]{描述性統計}
常見的描述性統計函數：
\begin{verbatim}
length(dt$Science)   #個數
mean(dt$Science)     #平均數
sd(dt$Science)       #標準偏差
quantile(dt$Science) #百分位數
\end{verbatim}

如果要求各組的描述性統計呢？使用 \verb+tapply()+。
\begin{block}{\texttt{tapply}的基本語法}
\verb+tapply(變數, 分組因子, 運算函數, ...)+
\end{block}
例如，要計算Science在不同Gender內的平均數：\\
\verb+tapply(dt$Science, dt$Gender, mean)+\\
%或是用\verb+subset()+切出子集，例如\\
%\verb+mean( subset(dt, Gender == "m")$Science )+ \\
\end{frame}

\begin{frame}[fragile]{單樣本\emph{T}檢驗}

目標：檢驗Science的平均是否為60。
\begin{block}{\texttt{t.test}的基本語法}
\verb+t.test(+
  \verb+資料, alternative = "t" 或 "l" 或 "g",+
  \verb+mu = 假說平均數, ...)+
\end{block}
\begin{verbatim}
t.test(dt$Science, alternative = "t", mu = 60) #雙尾
t.test(dt$Science, alternative = "g", mu = 60) #右單尾
t.test(dt$Science, alternative = "l", mu = 60) #左單尾
\end{verbatim}
\end{frame}

\begin{frame}[fragile]{雙樣本成對\emph{T}檢驗}
目標：檢驗Literature和Science差之平均是否為0。
\begin{block}{\texttt{t.test()}的基本語法}
\verb+t.test(資料一, 資料二, alternative = "t" 或 "l" 或 "g",+
\verb+       mu = 假說中配對差的平均數, pair = true, ...)+
\end{block}
\begin{verbatim}
t.test(dt$Literature, dt$Science, pair = T)
# 預設雙尾；預設平均差為零
\end{verbatim}
\end{frame}


\begin{frame}[fragile]{雙樣本獨立\emph{T}檢驗}
目標：檢驗二種Gender的Literature之平均是否相等。
%\verb+tapply(dt$Literature, dt$Gender, mean) #分組平均+
%\verb+tapply(dt$Literature, dt$Gender, sd)   #分組標準差+
\begin{block}{\texttt{t.test()}的基本語法}
\verb+t.test(資料一, 資料二, alternative = "t" 或 "l" 或 "g",+\\
\verb+       mu = 假說中平均數的差, +\\
\verb+       pair = F, var.equal = T 或 F, ...)+
\verb+t.test(應變數 ~ 僅二類的類別因子, data = 資料框, ...)+
\end{block}
\begin{verbatim}
t.test(
  subset(dt, Gender == "m")$Literature,
  subset(dt, Gender == "f")$Literature,
  var.equal = F)
t.test(Literature ~ Gender, data = dt, var.equal = T)
\end{verbatim}
\end{frame}
%
%\begin{frame}[fragile]{雙樣本獨立\emph{T}檢驗（以formula表示）}
%\begin{block}{目標}
%檢驗二種Gender的Literature之平均是否相等。
%\end{block}
%\begin{block}{\texttt{t.test()}的基本語法}
%\verb+t.test(+
%\verb+應變數 ~ 類別因子, data = 資料框, ...)+
%\end{block}
%\begin{verbatim}
%t.test(Literature ~ Gender, data = dt, var = F)
%# 預設雙尾；預設平均差為零；假設變方相等
%\end{verbatim}
%\end{frame}

\begin{frame}[fragile]{盒形圖}

\begin{block}{\texttt{boxplot()}的基本語法}
\verb+boxplot(應變數 ~ 類別因子, data = 資料框, ...)+
\end{block}

\begin{verbatim}
boxplot(Literature ~ Gender, data = dt, 
  ylab = "Literature score", xlab = "Gender")
\end{verbatim}

\begin{center}
\includegraphics[width=0.75\textwidth]{Rplot-two-group.pdf}
\end{center}
\end{frame}

%pdf("Rplot-two-group.pdf", width=5, height=2.5)
%par(mar=c(4,4,0.5,0.1))
%boxplot(Literature ~ Gender, data = dt, 
%  ylab = "Literature score", xlab = "Gender")
%dev.off()

\begin{frame}[fragile]{單因子變異數分析}
目標：檢驗三種Group的Literature之平均是否相等，並進行Tukey事後檢驗。

\begin{block}{\texttt{aov()}和\texttt{TukeyHSD()}的基本語法}
\verb+aov(+
\verb+應變數 ~ 三組以上類別自變數, data = 資料框, ...)+\\
\verb+TukeyHSD(aov物件, "分組因子", ...)+
\end{block}

\begin{verbatim}
fit.1 <- aov(Literature ~ Group, data = dt)
summary(fit.1) # Type I sum of square
TukeyHSD(fit, "Group")
\end{verbatim}

\end{frame}

\begin{frame}[fragile]{盒形圖}

\begin{block}{\texttt{boxplot()}的基本語法}
\verb+boxplot(應變數 ~ 類別因子, data = 資料框, ...)+
\end{block}

\begin{verbatim}
boxplot(Literature ~ Group, data = dt, 
  ylab = "Literature score", xlab = "Group")
\end{verbatim}

\begin{center}
\includegraphics[width=0.75\textwidth]{Rplot-three-group.pdf}
\end{center}
\end{frame}

%
%pdf("Rplot-three-group.pdf", width=5, height=2.5)
%par(mar=c(4,4,0.5,0.1))
%boxplot(Literature ~ Group, data = dt, 
%  ylab = "Literature score", xlab = "Group")
%dev.off()


\begin{frame}[fragile]{簡單線性迴歸}
目標：建立Science對應Literature的簡單線性迴歸模型，並檢驗斜率是否為零。
\begin{block}{\texttt{lm()}的基本語法}
\verb+lm(應變數 ~ 連續自變數, data = 資料框, ...)+
\end{block}
\begin{verbatim}
fit.2 <- lm(Literature ~ Science, data = dt)
summary(fit.2)
anova(fit.2) # Type I sum of square
\end{verbatim}
\end{frame}


\begin{frame}[fragile]{簡單線性相關}
目標：計算Science與Literature的簡單線性相關係數是否為零。
\begin{block}{\texttt{cor.test()}的基本語法}
\verb+cor.test(第一群資料, 第二群資料,+
\verb+         alternative = "t" 或 "l" 或 "g", ...)+
\verb+cor.test(第一群資料 ~ 第二群資料, data = 資料框, ...)+
\end{block}
\begin{verbatim}
cor.test(dt$Literature, dt$Science)
cor.test(Literature ~ Science, data = dt)
cor.test(Science ~ Literature, data = dt)
\end{verbatim}
\end{frame}


\begin{frame}[fragile]{散佈圖}

\begin{block}{\texttt{coef()}的基本語法}
\verb+coef(lm物件, ...)+  \# 取出各迴歸係數
\end{block}

\begin{block}{\texttt{plot.formula()}和\texttt{abline()}的基本語法}
\verb+plot(縱軸資料 ~ 橫軸資料, data = 資料框, ...)+\oldfootnote{\texttt{plot.formula()}可簡寫成\texttt{plot()}。}\\
\verb+abline(a = 截距, b = 斜率)+ \# 畫上迴歸線
\end{block}

\begin{verbatim}
plot(Literature ~ Science, data = dt)
abline(a = coef(fit.2)[1], b = coef(fit.2)[2], lty = 3)
\end{verbatim}
\end{frame}

\begin{frame}[fragile]{散佈圖}

\begin{verbatim}
plot(Literature ~ Science, data = dt)
abline(a = coef(fit.2)[1], b = coef(fit.2)[2], lty = 3)
\end{verbatim}

\begin{center}
\includegraphics[width=0.75\textwidth]{Rplot-sct.pdf}
\end{center}
\end{frame}

%
%pdf("Rplot-sct.pdf", width=5, height=2.5)
%par(mar=c(4,4,0.5,0.1))
%fit <- lm(Literature ~ Science, data = dt)
%plot(Literature ~ Science, data = dt)
%abline(a = coef(fit)[1], b = coef(fit)[2], lty = 3)
%dev.off()




%\begin{frame}[fragile]{卡方適合度檢驗}
%\end{frame}

%\begin{frame}[fragile]{卡方獨立性檢驗}
%\end{frame}


\begin{frame}[fragile]{Q\&A的時間又到囉}
\begin{itemize}
\item[Q] 我怎麼知道我做對了？
\item[A] 拿出你的統計學課本的例題，用R做做看。
\end{itemize}
\begin{itemize}\item[Q] R畫的圖想做更多調整$\cdots\cdots$
\item[A1] 這件工作不是非常容易，需要經驗。有空看看 \verb+par()+ 和 \verb+plot()+ 的使用手冊。
\item[A2] 初學者可以先用 R 畫好概要圖，再以其它圖片編輯軟體後製。
\end{itemize}
\end{frame}



\section{學習心得與討論資源}\subsection{}

\begin{frame}{阿盤的個人學習心得}
\begin{itemize}
\item 修習使用R的課。
\item 多「玩」。把函數裡的 Example 玩一玩、改一改。
\item 肯問人。逛逛網路教學和論壇。
\item 買（可能不只一本）書。
\item 拿出統計學課本的例題，用R做做看。
\item 做過的程式碼要建檔，方便日後使用。
\item 卡關時，先用英文問Google大神。
\item 做出答案時，不要直接相信這是正解，應該以專業人士、書籍、網頁資料驗證。
\end{itemize}
\end{frame}


\begin{frame}{中文書籍推薦}
繁體中文書非常少，但簡體中文書不少。去圖書館或書局翻翻。能看懂有收穫就有參考價值。初學程式語言者應該都需要一本。
\begin{itemize}
\item 《R軟體：應用統計方法》陳景祥著，東華出版社。\\ 對初學者很有幫助的一本。R語言和統計學併重。
\item 《R 錦囊妙計》 Paul Teetor著，張夏菁譯，歐萊禮出版社。\\ 前半本內容是R語言，後半本是以R進行統計工作。
\item {\CJKfontspec{Heiti SC Medium}《R语言实用教程》薛毅、陈立萍著，清华大学出版社。}
\item {\CJKfontspec{Heiti SC Medium}《统计建模与R软件》薛毅、陈立萍著，清华大学出版社。} \\ 以數理統計為主，R語言實作為輔。
\end{itemize}
\end{frame}

\begin{frame}{英文書籍推薦}
英文書選擇極多。我推薦以下幾本我喜歡或值得閱讀的。
\begin{itemize}
\item ``Biostatistical Design and Analysis Using R: A Practical Guide'' by Murray Logan. Wiley-Blackwell Press.\\ 實驗設計和R並重，非常推薦。
\item ``The R Book, 2nd Edition'' by Michael J.~Crawley. Wiley Press. \\ 較不易閱讀，但仍值得細讀。R語言和統計併重。
\item ``A First Course in Statistical Programming with R'' by W.~John Braun \& Duncan J.~Murdoch. Cambridge University Press. \\ 易讀。統計學基礎內容為主，但實驗設計部份少。
\end{itemize}
\end{frame}


\begin{frame}{網路教學}
\begin{itemize}
\item 《R 演習室》\makeatletter @ \makeatother youtube.com\oldfootnote{\url{https://www.youtube.com/playlist?list=PL5AC0ADBF65924EAD}} \\ 針對初學者的 R 視訊教學系列。有廣告（歡迎多看幾秒），但有提供影片載點。
\item ``Quick-R''by Robert I.~Kabacoff\oldfootnote{\url{http://www.statmethods.net/}}
\item 請自行 Google「R turorial」，實在太多了。
\item 中文教學網頁極少。還是找英文的比較實在。
\end{itemize}
\end{frame}


\begin{frame}{網路討論區}
\begin{itemize}
\item PTT的R\_Language板 \\ 路徑：戰略高手 $\rightarrow$ CompScience $\rightarrow$ R\_Language\\ 有幾位高手。對初學者友善。歡迎來和安德魯大大認親。
\item R軟體使用者論壇\oldfootnote{\url{https://groups.google.com/forum/?hl=zh-TW\#!forum/taiwanruser}}
\item Tag ``R''  \makeatletter @ \makeatother stackoverflow.com\oldfootnote{\url{http://stackoverflow.com/questions/tagged/r}}
\end{itemize}
\end{frame}



\begin{frame}[fragile]{R的套件}
\begin{block}{什麼是套件（package）？}
安裝在R系統裡的外掛，讓你「不用重新造輪子」。
\end{block}

\begin{block}{如何安裝、更新及引入套件？}
\begin{itemize}
\item 連上網路之後，輸入 \verb+install.packages("套件名稱")+ 可以安裝某套件
\item 在已安裝某套件之後，輸入 \verb+library(套件名稱)+ 可引入該套件，之後才可以使用它的功能。
\item 連上網路之後，輸入 \verb+update.packages()+ 可以更新所有已安裝套件。
\end{itemize}
\end{block}

%\begin{block}{練習}
%安裝一個名叫「\verb+vegan+」的套件，並將之引入R中。
%\end{block}
\end{frame}

\begin{frame}[fragile]{R的官方套件庫}
R官方收錄有六千多個的套件，\footnote{\url{http://cran.r-project.org/web/packages/available_packages_by_name.html}}可直接以 \verb+install.packages()+ 安裝。
\begin{block}{我常用的套件}
\begin{itemize}
\item （一般／廣義）線性模型：gmodels、lmtest、aod
\item 混合模型：lme4、nlme、MCMCglmm
\item 蒙地卡羅、隨機化：permute、boot
\item 多變量、群落生態、生物多樣性：vegan
\end{itemize}
\end{block}
\end{frame}


\begin{frame}[fragile]{Q\&A的時間又到囉}
\begin{itemize}
\item[Q] 如何找能做某件事的套件？
\item[A] 請Google大神幫你找最快。真的。
\end{itemize}
\begin{itemize}
\item[Q] 阿盤學多久才叫「上手」、「有生產力」？
\item[A] 自學半年以上，但我今天就要把八成功力都傳給你了！
\end{itemize}
\begin{itemize}\item[Q] 聽到這裡，我想認輸了$\cdots\cdots$我想重回用滑鼠搞定的世界。
\item[A] 只要是適合自己的工具，就是好工具。
\end{itemize}
\end{frame}

\section{小試身手}\subsection{}

\begin{frame}{今日的總複習}
\begin{itemize}
\item 建立一個（適合自己的）R工作環境
\item 了解R的函數與如何閱讀其使用手冊
\item R如何讀取並整理資料
\item 練習常見的統計方法
\item 讓自己更厲害的資源
\end{itemize}
\end{frame}


\begin{frame}[shrink=8, fragile]{按今日課程試著完成以下練習}
想辦法以R讀取 \verb+nation-data.xlsx+ 的內容並命名為 \verb+mydt0+ 資料框。以檔案中所有國家為樣本完成以下分析。
\begin{enumerate}
\item 利用雙樣本配對\emph{T}檢驗，考驗 \verb+Mortality.rate.child+ 之平均是否顯著高於 \verb+Mortality.rate.newborn+ 之平均。提示：不是雙尾檢驗。
\item 以 \verb+GDP.10000+ 為組別，計算 \verb+HIV.rate+ 在各組的平均值和標準偏差，並利用雙樣本獨立\emph{T}檢驗比較組間的平均是否顯著不等，以及繪製對應的盒形圖。
\item 以 \verb+Continent+ 為組別，計算 \verb+Age.ave+ 在各組的平均值和標準偏差，並利用單因子變異數分析比較組間的平均差異是否顯著不等，以及繪製對應的盒形圖。
\item 以 \verb+HIV.rate+ 為反應變數（應變數），\verb+Age.ave+ 為解釋變數（自變數），建立簡單線性迴歸模型，並檢驗斜率及相關係數是否顯著不為零，以及繪製對應之散佈圖。
\end{enumerate}
\end{frame}

\end{document}